!function(){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if(!(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)))return;var a=[],t=!0,l=!1,i=void 0;try{for(var o,r=n[Symbol.iterator]();!(t=(o=r.next()).done)&&(a.push(o.value),!e||a.length!==e);t=!0);}catch(n){l=!0,i=n}finally{try{t||null==r.return||r.return()}finally{if(l)throw i}}return a}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a,t,l,i,o,r,c,d;a=window.nLingual={},t=a.Framework={},l=t.Language=Backbone.Model.extend({defaults:{system_name:"",native_name:"",short_name:"",iso_code:"",slug:"",locale_name:"",direction:"",active:!0}}),i=t.LanguageSet=Backbone.Collection.extend({model:l}),o=t.LocalizableField=Backbone.Model.extend({idAttribute:"field",defaults:{field_id:"",values:"",nonce:""}}),r=t.LocalizableFieldSet=Backbone.Collection.extend({model:o}),c=a.Languages=new i,d=a.LocalizableFields=new r,jQuery((function(t){t(".nl-checkall").change((function(){var n=t(this).data("name");t('input[name="'.concat(n,'[]"]')).attr("checked",this.checked)})),t(".nl-matchall").change((function(){var n=t(this).data("name");t('[name="'.concat(n,'"]')).val(this.checked?"*":"")})),t(".nl-section-content").hide(),t(".nl-section-toggle").each((function(){t(this).data("text",t(this).text())})).click((function(){var n=t(this),e=n.parent();e.toggleClass("open");var a=e.hasClass("open");e.find(".nl-section-content").animate({height:"toggle"}),n.text(n.data(a?"alt":"text"))})),t(".nl-preview").on("nl:render",(function(){var n,e=c.get(t("#nlingual_default_language").val()),a=e&&e.get("slug")||"en",l=t("#nlingual_query_var").val()||"nl_language",i=t("#nlingual_skip_default_l10n").attr("checked"),o=t("#nlingual_post_language_override").attr("checked");n=t(this).hasClass("nl-url-preview")?t(this).data(i?"excluded":"included"):t(this).hasClass("nl-override-preview")?t(this).data(o?"on":"off"):t(this).data("format"),t(this).text(n.replace(/%l/g,a).replace(/%v/g,l))})).trigger("nl:render"),t("#nlingual_default_language").change((function(){t(".nl-preview").trigger("nl:render")})),t("#nlingual_skip_default_l10n").change((function(){t(".nl-preview").trigger("nl:render")})),t("#nlingual_post_language_override").change((function(){t(".nl-preview").trigger("nl:render")})),t("#nlingual_query_var").on("keyup change",(function(){t(".nl-preview").trigger("nl:render")})),t(".nl-preview").hide().filter(".nl-redirect-get").show(),t('input[name="nlingual_options[url_rewrite_method]"]').change((function(){var n=t(this).val();this.checked&&n&&t(".nl-preview").hide().filter(".nl-redirect-".concat(n)).show()})).change(),t("#nlingual_languages").each((function(){var n=t(this),e=t("#nl_language_preset"),i=t("#nl_language_list"),o=t("#nl_language_add"),r=t("#nl_language_row").text(),d=-1;for(var s in i.sortable({items:"tr",containment:"parent",handle:".handle"}),a.presets)e.append('<option value="'.concat(s,'">').concat(a.presets[s].system_name,"</option>"));function u(n){var e=r.replace(/%id%/g,n.id);for(var a in n.attributes){var l=new RegExp("%"+a+"%","g");e=e.replace(l,n.get(a))}var o=t(e);o.find('.nl-language-direction input[value="'.concat(n.get("direction"),'"]')).attr("checked",!0),o.find(".nl-language-active input").attr("checked",n.get("active")),i.append(o).sortable("refresh")}c.each(u),o.click((function(){var n;if(e.val()){var t=e.val();(n=new l(a.presets[t])).set("iso_code",t),e.val(null)}else n=new l;n.id=d,n.set("slug",n.get("iso_code")),n.set("active",!0),u(n),d--})),n.on("change",".nl-language-delete input",(function(){var n=t(this).parents("tr").first();n.toggleClass("todelete",this.checked),n.find("input").not(this).attr("disabled",this.checked)})),n.on("change",".nl-language-system_name input",(function(){var n=t(this).parents("tr").first(),e=t(this).val(),a=n.find(".nl-language-locale_name input"),l=n.find(".nl-language-iso_code input"),i=n.find(".nl-language-slug input");l.val()||l.val(e.substr(0,2).toLowerCase()),a.val()||a.val(l.val()),i.val()||i.val(l.val())}))}));var i=t('<div class="nl-localizer"></div>').html((function(){var n='<div class="nl-localizer-toggle" title="'.concat(nlingualL10n.LocalizeThis,'"></div>');return c.each((function(e){var a=nlingualL10n.LocalizeFor.replace("%s",e.get("system_name"));n+='<div class="nl-localizer-option" title="'.concat(a,'" data-nl_language="').concat(e.id,'">\n\t\t\t\t\t<div class="nl-option-text" data-slug="').concat(e.get("slug"),'">').concat(e.get("system_name"),"</div>\n\t\t\t\t</div>")})),n}));if(d.each((function(n){var e=n.get("field_id"),l=n.get("values"),o=n.get("nonce"),r=!1,d=t("#"+e);if(0!==d.length&&d.is("input, textarea")){var s;d.addClass("nl-localizable-input"),d.hasClass("wp-editor-area")?s=d.parents(".wp-editor-wrap"):(d.wrap('<div class="nl-localizable"></div>'),s=d.parent());var u=i.clone();d.data("$nl_localizer",u),u.data("nl_current_language",a.default_language),u.data("$nl_localizer_field",d);var g=t('<input type="hidden" />');g.attr("name",d.attr("name")),g.val(d.val()),g.appendTo(s),u.data("$nl_localized_".concat(a.default_language),g),c.each((function(n){if(a.default_language!==n.id){var e=l[n.id]||null,i=t('<input type="hidden" />');i.attr("name","nlingual_localized[".concat(d.attr("name"),"][").concat(n.id,"]")),i.val(e),u.data("$nl_localized_".concat(n.id),i),i.appendTo(s),""!==e&&null!==e&&(r=!0)}})),r&&u.find('[data-nl_language="'.concat(a.default_language,'"]')).addClass("nl-current"),s.append('<input type="hidden" name="_nl_l10n_nonce['.concat(n.id,']" value="').concat(o,'" />')),u.appendTo(s)}})),t("body").on("click",".nl-localizer-option",(function(){var n=t(this),e=n.parent(),l=n.data("nl_language")||a.default_language;t(this).addClass("nl-current").siblings().removeClass("nl-current");var i=e.data("$nl_localizer_field"),o=e.data("$nl_localized_".concat(l));i.trigger("nl:localizer:update"),e.data("nl_current_language",l);var r=o.val(),c=o.attr("name");i.val(r).attr("name",c),i.trigger("nl:localizer:change")})),t("body").on("input nl:localizer:update nl:localizer:save",".nl-localizable-input",(function(){var n=t(this).data("$nl_localizer"),e=n.data("nl_current_language");n.data("$nl_localized_".concat(e)).val(this.value)})),"object"===("undefined"==typeof tinymce?"undefined":n(tinymce))){tinymce.on("SetupEditor",(function(n){var e=n.editor||n,a=t(e.getElement()),l=a.data("$nl_localizer");l&&(e.on("init",(function(){t(e.getContainer()).parent().after(l)})),a.on("nl:localizer:update",(function(){var n=wp.editor.removep(e.getContent());a.val(n)})),a.on("nl:localizer:change",(function(){var n=wp.editor.autop(a.val());e.setContent(n)})))}));var o=tinymce.Editor.prototype.save;tinymce.Editor.prototype.save=function(){o.apply(this,arguments),this.fire("SavedContent"),t(this.getElement()).trigger("nl:localizer:save")}}if(t(".nl-language-input").change((function(){var n=t(this).val(),e=t(this).parents(".nl-translation-manager");e.find(".nl-manage-translations").toggleClass("hidden","0"===n),e.find(".nl-translation-field").show(),e.find(".nl-translation-"+n).hide()})).change(),t(".nl-translation-field").each((function(){var n=t(this).find(".nl-input").val(),e=t(this).find(".nl-add-translation"),a=t(this).find(".nl-edit-translation");a.hide(),parseInt(n,10)&&(e.hide(),a.show())})),t(".nl-add-translation").click((function(){var n=t(this).parents(".nl-field"),a=n.find(".nl-input"),l=n.find(".nl-add-translation"),i=n.find(".nl-edit-translation"),o=t("#post_ID").val(),r=t("#nl_language").val(),c=a.parents(".nl-field").data("nl_language");window.open(nlingualL10n.admin_post+"?"+t.param({action:"nl_new_translation",post_id:o,post_language_id:r,translation_language_id:c}),"_blank").onload=function(){var n=e(this.location.href.match(/post=(\d+)/),2)[1];a.val(n),l.hide(),i.show().attr("title")}})),t(".nl-edit-translation").click((function(){var n=t(this).parents(".nl-field").find(".nl-input").val();if("new"===n||parseInt(n,10)<=0)alert(nlingualL10n.NoPostSelected);else{var e=t(this).data("url").replace("%d",n);window.open(e)}})),"object"===("undefined"==typeof inlineEditPost?"undefined":n(inlineEditPost))){var r=inlineEditPost.edit;inlineEditPost.edit=function(n){r.apply(this,arguments);var e=n&&parseInt(this.getId(n),10)||0,a=t("#post-".concat(e)),l=t("#edit-".concat(e)),i=a.find(".nl-nonce").val();l.find(".nl-nonce").val(i);var o=a.find(".nl-language").val();l.find(".nl-language-input").val(o).change(),l.find(".nl-translation-field").each((function(){var n=t(this).data("nl_language"),e=a.find(".nl-translation-".concat(n)).val();t(this).find("select").val(e||0)}))}}if("object"===("undefined"==typeof inlineEditTax?"undefined":n(inlineEditTax))){var s=inlineEditTax.edit;inlineEditTax.edit=function(){s.apply(this,arguments)}}}))}();
//# sourceMappingURL=admin.min.js.map